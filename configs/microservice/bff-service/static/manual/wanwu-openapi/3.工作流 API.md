工作流 API
========



## 工作流运行API

该接口用于执行指定的工作流并返回运行结果。

### 请求接口

| Type                 | Instructions                                                 |
| -------------------- | ------------------------------------------------------------ |
| 方法                 | Http                                                         |
| 请求URL              | 按照应用实际API根地址，例如：<br />`http://localhost:8081/service/api/openapi/v1/workflow/run` |
| 字符编码             | UTF-8                                                        |
| 请求类型             | POST                                                         |
| 鉴权方式(header参数) | `Authorization: Bearer {API Key}`                            |
| 请求格式             | `Content-Type: application/json`                             |
| 响应格式             | `Content-Type: application/json`                             |

### 调用示例1

工作流查询成都未来天气

```shell
curl -k --location 'http://localhost:8081/service/api/openapi/v1/workflow/run' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer <API Key>' \
--data '{
    "city": "成都"
}'
```

```
{
  "forecasts": [
    {
      "date": "2025-09-12",
      "daypower": "1-3",
      "daytemp": "32",
      "daytemp_float": "32.0",
      "dayweather": "多云",
      "daywind": "北",
      "nightpower": "1-3",
      "nighttemp": "22",
      "nighttemp_float": "22.0",
      "nightweather": "多云",
      "nightwind": "北",
      "week": "5"
    },
    {
      "date": "2025-09-13",
      "daypower": "1-3",
      "daytemp": "34",
      "daytemp_float": "34.0",
      "dayweather": "多云",
      "daywind": "北",
      "nightpower": "1-3",
      "nighttemp": "23",
      "nighttemp_float": "23.0",
      "nightweather": "多云",
      "nightwind": "北",
      "week": "6"
    }
  ]
}
```

### 调用示例2

工作流文件传参示例

```shell

curl -k --location 'http://localhost:8081/service/api/openapi/v1/workflow/run' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer <API Key>' \
--data '{
    "file": "http://xxx.xx.xxx.xx:8081/workflow/minio/presign/workflow/tos-cn-i-v4nquku3lp/02fc7e60-6b2c-4b6d-b0c9-2f1cc47d608d.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=root%2F20250912%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250912T064729Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Signature=b497e5800cca87afca26dfffdbe97e152b814251b0ae7adec3cf6945f5610b3b"
}'
```

## 工作流上传文件API

该接口用于执行指定的工作流上传文件并返回文件链接。

### 请求接口

| Type                 | Instructions                                                 |
| -------------------- | ------------------------------------------------------------ |
| 方法                 | Http                                                         |
| 请求URL              | 按照应用实际API根地址，例如：<br />`http://localhost:8081/service/api/openapi/v1/workflow/file/upload` |
| 字符编码             | UTF-8                                                        |
| 请求类型             | POST                                                         |
| 鉴权方式(header参数) | `Authorization: Bearer {API Key}`                            |
| 请求格式             | `Content-Type: multipart/form-data`                          |
| 响应格式             | `Content-Type: application/json`                             |

### 请求参数

| Parameter | Required | Type | Instructions   |
| --------- | -------- | ---- | -------------- |
| file      | 是       | file | 需要上传的文件 |

### 响应参数

| Parameter | Type   | Instructions                  |
| --------- | ------ | ----------------------------- |
|           | string | 用户上传文件返回在oss中的链接 |

### 调用示例

```shell
curl -k --location 'http://localhost:8081/service/api/openapi/v1/workflow/file/upload' \
--header 'Content-Type: multipart/form-data' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer <API Key>' \
--form 'file=@/测试.txt'
```

### 响应示例

    http://xxx.xx.xxx.xx:8081/workflow/minio/presign/workflow/tos-cn-i-v4nquku3lp/02fc7e60-6b2c-4b6d-b0c9-2f1cc47d608d.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=root%2F20250912%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250912T064729Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Signature=b497e5800cca87afca26dfffdbe97e152b814251b0ae7adec3cf6945f5610b3b

