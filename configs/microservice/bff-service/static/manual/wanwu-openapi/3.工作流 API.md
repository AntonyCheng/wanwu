工作流 API
========



## 工作流运行API

该接口用于执行指定的工作流并返回运行结果。

### 请求接口

| Type                 | Instructions                                                 |
| -------------------- | ------------------------------------------------------------ |
| 方法                 | Http                                                         |
| 请求URL              | 按照应用实际API根地址，例如：<br />`http://localhost:8081/service/api/openapi/v1/workflow/run` |
| 字符编码             | UTF-8                                                        |
| 请求类型             | POST                                                         |
| 鉴权方式(header参数) | `Authorization: Bearer {API Key}`                            |
| 请求格式             | `Content-Type: application/json`                             |
| 响应格式             | `Content-Type: application/json`                             |

### 请求参数

| Parameter | Required | Type           | Instructions                                           |
| --------- | -------- | -------------- | ------------------------------------------------------ |
| input1    | 否       | map[string]any | 包含工作流输入参数的键值对对象(命名对应开始节点变量名) |
| input2    | 否       | map[string]any | 包含工作流输入参数的键值对对象(命名对应开始节点变量名) |

### 响应参数

| Parameter | Type           | Instructions                             |
| --------- | -------------- | ---------------------------------------- |
| output    | map[string]any | 工作流响应文本（命名对应结束节点变量名） |

### 调用示例

```shell
curl -k --location 'http://localhost:8081/service/api/openapi/v1/workflow/run' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer <API Key>' \
--data '{
    "input1": "成都",
    "input2": "西安"
}'
```

```shell
curl -k --location 'http://localhost:8081/service/api/openapi/v1/workflow/run' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer <API Key>' \
--data '{
    "input": "http://xxx.xx.xxx.xx:8081/workflow/minio/presign/workflow/tos-cn-i-v4nquku3lp/02fc7e60-6b2c-4b6d-b0c9-2f1cc47d608d.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=root%2F20250912%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250912T064729Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Signature=b497e5800cca87afca26dfffdbe97e152b814251b0ae7adec3cf6945f5610b3b"
}'
```

### 响应示例

```json
{"output1":"成都两日游攻略：第一天：抵达成都后，首先前往宽窄巷子，体验老成都的生活气息和文化韵味。下午可以游览武侯祠，了解三国历史及诸葛亮的事迹。晚上则可前往锦里古街品尝地道川菜，并感受夜市的热闹氛围。第二天：上午参观熊猫基地，近距离接触可爱的大熊猫。下午可以选择去杜甫草堂，感受诗圣杜甫的文化影响。傍晚时分，不妨漫步在九眼桥或合江亭，享受成都夜生活的同时，也可以考虑乘坐夜游锦江的船只，欣赏沿岸美景。注意：行程安排可能因季节、天气和个人兴趣而有所不同，建议根据实际情况调整计划。",
"output2":"西安二日游攻略：第一天：上午：抵达西安后，首先前往大雁塔，参观这座唐代古建筑，感受其庄严与历史的沉淀。随后，在陕西历史博物馆深入了解陕西乃至中国的历史文化。下午：游览城墙，可以选择骑行或步行环绕一圈，欣赏古城墙的壮丽和西安的城市风光。\n\n傍晚：前往南门附近的美食街尝试当地的小吃，如羊肉泡馍、凉皮等。第二天：上午：参观钟楼和鼓楼，了解这些标志性建筑背后的文化故事。接着可选择去回民街逛一逛，这里不仅是品尝小吃的好地方，还能感受到浓厚的民族风情。下午：如果对自然风光感兴趣，可以考虑去附近的华清池或者骊山游览，享受宁静的山水之美。晚上：在西安的夜市继续探索当地的特色小吃，同时体验一下西安的夜晚生活。注意：这只是一个基本框架，具体行程可以根据个人兴趣和实际情况调整。"}
```

## 工作流上传文件API

该接口用于执行指定的工作流上传文件并返回文件链接。

### 请求接口

| Type                 | Instructions                                                 |
| -------------------- | ------------------------------------------------------------ |
| 方法                 | Http                                                         |
| 请求URL              | 按照应用实际API根地址，例如：<br />`http://localhost:8081/service/api/openapi/v1/workflow/file/upload` |
| 字符编码             | UTF-8                                                        |
| 请求类型             | POST                                                         |
| 鉴权方式(header参数) | `Authorization: Bearer {API Key}`                            |
| 请求格式             | `Content-Type: multipart/form-data`                          |
| 响应格式             | `Content-Type: application/json`                             |

### 请求参数

| Parameter | Required | Type | Instructions   |
| --------- | -------- | ---- | -------------- |
| file      | 是       | file | 需要上传的文件 |

### 响应参数

| Parameter | Type   | Instructions                  |
| --------- | ------ | ----------------------------- |
|           | string | 用户上传文件返回在oss中的链接 |

### 调用示例

```shell
curl -k --location 'http://localhost:8081/service/api/openapi/v1/workflow/file/upload' \
--header 'Content-Type: multipart/form-data' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer <API Key>' \
--form 'file=@/测试.txt'
```

### 响应示例

    http://xxx.xx.xxx.xx:8081/workflow/minio/presign/workflow/tos-cn-i-v4nquku3lp/02fc7e60-6b2c-4b6d-b0c9-2f1cc47d608d.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=root%2F20250912%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250912T064729Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Signature=b497e5800cca87afca26dfffdbe97e152b814251b0ae7adec3cf6945f5610b3b

